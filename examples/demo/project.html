<project>
  <sequence>
    <fragment class="intro_image" />
    <fragment class="clip_1 ambient" />
    <fragment class="glitch" />
    <fragment class="clip_2 ambient" />
    <fragment class="outro_image outro_duration" id="ending_screen" />
  </sequence>
  <sequence>
    <fragment class="intro_sound" />
  </sequence>
  <sequence>
    <fragment class="intro_image_message">
      <container>
        <div class="main_container">
          <div class="main_container_text">
            <div class="main_container_text_outline">
              <span>Christmas</span> <span>Morning</span> <span>in</span>
              <span>Liberec</span>
            </div>
          </div>
        </div>
      </container>
    </fragment>
  </sequence>
  <sequence>
    <fragment class="outro_sound outro_duration" id="outro_sound" />
  </sequence>
</project>

<style>
  @import url("https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap");

  .main_container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100vw;
    height: 100vh;
    font-family: "Roboto", sans-serif;
    font-size: 6rem;
  }
  .main_container_text {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: black;
  }
  .main_container_text_outline {
    width: 80%;
  }
  .main_container_text_outline span {
    background-color: white;
    padding: 0.5rem 1rem;
    margin: 0 -1.2rem;
    border-radius: 2.5rem;
  }

  /* todo: variable support would be cool */
  /* :root {
    --primary-color: #3498db;
    --spacing: 20px;
    --font-size: 16px;
  } */

  .disabled {
    display: none;
  }
  .ambient {
    -object-fit: contain ambient 25 -0.1 0.7;
  }
  .outro_duration {
    -duration: 5000ms;
  }

  .intro_image {
    -asset: intro_image;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .intro_image_message {
    -asset: container_8873087433d84074;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .clip_1 {
    -asset: clip_01;
    -trim-start: 3000ms;
    -transition-start: fade-in 1000ms;
  }
  .clip_2 {
    -asset: clip_02;
    -duration: 3000ms;
    -transition-end: fade-out 1000ms;
  }
  .outro_image {
    -asset: intro_image;
    -transition-start: fade-in 1000ms;
    -transition-end: fade-out 500ms;
  }
  .glitch {
    -asset: glitch;
    -duration: 500ms;
    -offset-start: -250ms;
    -overlay-start-z-index: 1;
    -offset-end: -250ms;
    -overlay-end-z-index: 1;
    -chromakey: smooth strict #000000;
  }
  .intro_sound {
    -asset: guitar_music;
    -duration: 4000ms;
    -transition-end: fade-out 500ms;
  }
  .outro_sound {
    -asset: guitar_music;
    -offset-start: calc(url(#ending_screen.time.start));
    -transition-end: fade-out 500ms;
  }
</style>

<assets>
  <asset
    data-name="clip_01"
    data-path="./input/20251224_110901.mp4"
    data-author="John Doe"
  />
  <asset
    data-name="clip_02"
    data-path="./input/20251224_111721.mp4"
    data-author="Jane Doe"
  />
  <asset
    data-name="intro_image"
    data-path="./images/20251224_110757.jpg"
    data-author="FooBar"
  />
  <asset data-name="glitch" data-path="./effects/digital_glitch_01.mp4" />
  <asset
    data-name="guitar_music"
    data-path="./audio/instrumental-acoustic-guitar-music-401434.mp3"
    data-author="Baz"
  />
  <asset
    data-name="container_8873087433d84074"
    data-path="./.cache/containers/8873087433d84074.png"
    data-author="Baz"
  />
</assets>

<outputs>
  <output
    name="youtube"
    path="./output/youtube.mp4"
    resolution="1920x1080"
    fps="30"
  />
  <output
    name="youtube_shorts"
    path="./output/youtube_shorts.mp4"
    resolution="1080x1920"
    fps="30"
  />
  <output
    name="instagram_shorts"
    path="./output/instagram_shorts.mp4"
    resolution="1080x1920"
    fps="30"
  />
</outputs>
